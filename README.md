# Інформаційно-аналітична система обліку товарів у торгівлі

Веб-застосунок для автоматизації обліку товарів, складських залишків та продажів з аналітикою та звітами.

## Технології

- **Backend**: Python 3 + Django 6.0
- **Frontend**: Bootstrap 5, JavaScript, Chart.js
- **Database**: SQLite
- **C++ модуль**: Для обчислень аналітики (топ товарів, агрегація виручки)

## Функціональність

### Ролі користувачів

1. **КАСИР**
   - Логін/логаут
   - Створення продажів (позиції: товар, кількість, ціна)
   - Перегляд списку продажів (своїх або за день)
   - Система не дозволяє продати більше, ніж є на складі

2. **АДМІНІСТРАТОР**
   - Усе, що касир, плюс:
   - CRUD категорій
   - CRUD товарів (назва, категорія, ціна, опис, штрихкод/артикул, активність)
   - Склад: надходження, корекція/списання
   - Керування користувачами та ролями

3. **КЕРІВНИК**
   - Тільки перегляд:
   - Звіти за період: продажі, виручка, кількість
   - "Топ товарів" за сумою/кількістю
   - "Залишки на складі"
   - Аналітика з графіками: виручка по днях/тижнях, частка категорій у продажах

## Встановлення

### Локальна розробка:

1. Клонуйте репозиторій або розпакуйте архів

2. Створіть віртуальне середовище:
```bash
python3 -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
```

3. Встановіть залежності:
```bash
pip install -r requirements.txt
```

4. **Скомпілюйте C++ модуль** (обов'язково!):
```bash
cd cpp_analytics
make
cd ..
```

5. Виконайте міграції:
```bash
python manage.py makemigrations
python manage.py migrate
```

6. Створіть демонстраційні дані:
```bash
python manage.py seed_data
```

7. Запустіть сервер:
```bash
python manage.py runserver
```

8. Відкрийте браузер: http://127.0.0.1:8000

### Деплой на сервер:

**⚠️ Важливо:** C++ модуль **НЕ запускається автоматично** - він викликається через `subprocess.run()` коли потрібно. Але **потрібно скомпілювати** його на сервері!

**Швидкий деплой:**
```bash
./deploy.sh
```

**Або вручну:**
```bash
# 1. Компіляція C++ модуля
cd cpp_analytics && make && cd ..

# 2. Встановлення залежностей
pip install -r requirements.txt

# 3. Міграції
python manage.py migrate

# 4. Запуск сервера
python manage.py runserver
# або для production: gunicorn inventory_system.wsgi:application
```

**Детальні інструкції:** див. `DEPLOY.md`

## Дані для входу (після seed_data)

- **Адміністратор**: `admin` / `admin123`
- **Касир**: `cashier1` / `cashier123`
- **Керівник**: `manager1` / `manager123`

## Структура проекту

```
kurs/
├── inventory_system/      # Налаштування Django проекту
├── store/                 # Головний додаток
│   ├── models.py          # Моделі даних
│   ├── views.py           # Views (контролери)
│   ├── forms.py           # Форми
│   ├── urls.py            # URL маршрути
│   ├── admin.py           # Адмін панель
│   ├── templates/         # HTML шаблони
│   └── management/        # Management команди
├── cpp_analytics/         # C++ модуль для аналітики
│   ├── analytics.cpp      # Вихідний код
│   ├── Makefile           # Makefile для компіляції
│   └── analytics          # Скомпільований виконуваний файл
├── manage.py              # Django management скрипт
└── db.sqlite3             # База даних SQLite
```

## Основні модулі

### A. Авторизація і ролі
- Django auth + Groups/Permissions
- Різні ролі з різними правами доступу

### B. Довідники
- Товари (CRUD, пошук, фільтрація)
- Категорії (CRUD, пошук)

### C. Склад/залишки
- Надходження товарів
- Корекції
- Контроль залишку при продажі

### D. Продажі
- Створення продажу з позиціями
- Автоматичне списання зі складу
- Перевірка наявності товару

### E. Звіти
- Продажі за період
- Топ товарів
- Залишки на складі

### F. Аналітика
- Графіки (Chart.js)
- Виручка по днях
- Частка категорій у продажах
- Розрахунки частково в C++ модулі

## C++ модуль

C++ модуль `cpp_analytics/analytics` викликається з Python через subprocess для обчислення:
- Топ товарів за виручкою
- Агрегація виручки по днях
- Загальна статистика

Вхід/вихід у форматі JSON.

## Розробка

Для додавання нових функцій:

1. Додайте моделі в `store/models.py`
2. Створіть міграції: `python manage.py makemigrations`
3. Застосуйте міграції: `python manage.py migrate`
4. Додайте views в `store/views.py`
5. Додайте URLs в `store/urls.py`
6. Створіть templates в `store/templates/store/`

## Ліцензія

Цей проект створено для курсової роботи.

